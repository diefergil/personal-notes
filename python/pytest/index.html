<!DOCTYPE html>
<html class="no-js" lang="en"> <head><meta charset="utf-8"/><meta content="width=device-width,initial-scale=1" name="viewport"/><meta content="My personal notes" name="description"/><meta content="Diego" name="author"/><link href="https://diefergil.github.io/personal-notes/python/pytest/" rel="canonical"/><link href="../packaging/setuptools/" rel="prev"/><link href="../../about/" rel="next"/><link href="../../assets/images/favicon.png" rel="icon"/><meta content="mkdocs-1.4.3, mkdocs-material-9.1.20" name="generator"/><title>Pytests - My personal notes</title><link href="../../assets/stylesheets/main.eebd395e.min.css" rel="stylesheet"/><link href="../../assets/stylesheets/palette.ecc896b0.min.css" rel="stylesheet"/><link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link href="../../css/timeago.css" rel="stylesheet"/><link href="../../stylesheets/extra.css" rel="stylesheet"/><link href="../../stylesheets/links.css" rel="stylesheet"/><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-6S6TNHYVRT"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-6S6TNHYVRT",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-6S6TNHYVRT",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>var consent;"undefined"==typeof __md_analytics||(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script></head> <body data-md-color-accent="light-blue" data-md-color-primary="blue-grey" data-md-color-scheme="default" dir="ltr"> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/> <input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/> <label class="md-overlay" for="__drawer"></label> <div data-md-component="skip"> <a class="md-skip" href="#pytest"> Skip to content </a> </div> <div data-md-component="announce"> <aside class="md-banner"> <div class="md-banner__inner md-grid md-typeset"> For updates subscribe to the <a href="https://diefergil.github.io/personal-notes/newsletter/0_newsletter_index/"><strong>RSS feed</strong></a> <img height="15" src="/personal-notes/img/orange_logo.png" width="15"/> </div> </aside> </div> <header class="md-header md-header--shadow" data-md-component="header"> <nav aria-label="Header" class="md-header__inner md-grid"> <a aria-label="My personal notes" class="md-header__button md-logo" data-md-component="logo" href="../.." title="My personal notes"> <img alt="logo" src="../../img/logo.bmp"/> </a> <label class="md-header__button md-icon" for="__drawer"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg> </label> <div class="md-header__title" data-md-component="header-title"> <div class="md-header__ellipsis"> <div class="md-header__topic"> <span class="md-ellipsis"> My personal notes </span> </div> <div class="md-header__topic" data-md-component="header-topic"> <span class="md-ellipsis"> Pytests </span> </div> </div> </div> <form class="md-header__option" data-md-component="palette"> <input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="light-blue" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="blue-grey" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/> <label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></path></svg> </label> <input aria-label="Switch to light mode" class="md-option" data-md-color-accent="light-blue" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="blue-grey" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/> <label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"></path></svg> </label> </form> <label class="md-header__button md-icon" for="__search"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> </label> <div class="md-search" data-md-component="search" role="dialog"> <label class="md-search__overlay" for="__search"></label> <div class="md-search__inner" role="search"> <form class="md-search__form" name="search"> <input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/> <label class="md-search__icon md-icon" for="__search"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </label> <nav aria-label="Search" class="md-search__options"> <button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg> </button> </nav> <div class="md-search__suggest" data-md-component="search-suggest"></div> </form> <div class="md-search__output"> <div class="md-search__scrollwrap" data-md-scrollfix=""> <div class="md-search-result" data-md-component="search-result"> <div class="md-search-result__meta"> Initializing search </div> <ol class="md-search-result__list" role="presentation"></ol> </div> </div> </div> </div> </div> <div class="md-header__source"> <a class="md-source" data-md-component="source" href="https://github.com/diefergil/personal-notes" title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg> </div> <div class="md-source__repository"> diefergil/personal-notes </div> </a> </div> </nav> </header> <div class="md-container" data-md-component="container"> <main class="md-main" data-md-component="main"> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0"> <label class="md-nav__title" for="__drawer"> <a aria-label="My personal notes" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="My personal notes"> <img alt="logo" src="../../img/logo.bmp"/> </a> My personal notes </label> <div class="md-nav__source"> <a class="md-source" data-md-component="source" href="https://github.com/diefergil/personal-notes" title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg> </div> <div class="md-source__repository"> diefergil/personal-notes </div> </a> </div> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../.."> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/> <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0"> Cloud <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_2"> <span class="md-nav__icon md-icon"></span> Cloud </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_2_1" type="checkbox"/> <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0"> AWS <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_2_1_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_2_1"> <span class="md-nav__icon md-icon"></span> AWS </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../cloud/aws/app_runner/"> App Runner </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../cloud/aws/batch/"> Batch </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../cloud/aws/lambda/"> Lambda functions </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../cloud/aws/steps/"> Steps </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_2_2" type="checkbox"/> <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0"> Github <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_2_2_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_2_2"> <span class="md-nav__icon md-icon"></span> Github </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../cloud/github/codespaces/"> Codespaces </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_2_3" type="checkbox"/> <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0"> Google Cloud <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_2_3_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_2_3"> <span class="md-nav__icon md-icon"></span> Google Cloud </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../cloud/google/app_engine/"> App Engine </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../cloud/google/cloud_functions/"> Cloud Functions </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../cloud/google/cloud_run/"> Cloud Run </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/> <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0"> Data Science <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_3"> <span class="md-nav__icon md-icon"></span> Data Science </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_3_1" type="checkbox"/> <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0"> Statistics <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_3_1_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_3_1"> <span class="md-nav__icon md-icon"></span> Statistics </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../data_science/statistics/intro/"> Introduction to statistics </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/> <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0"> Generative AI <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_4"> <span class="md-nav__icon md-icon"></span> Generative AI </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../generative_ai/introduction/"> Introduction </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_4_2" type="checkbox"/> <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0"> Adapting foundational models <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_4_2_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_4_2"> <span class="md-nav__icon md-icon"></span> Adapting foundational models </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../generative_ai/adapting_models/"> Introduction </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../generative_ai/prompting/"> Prompting </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../generative_ai/instruction_fine_tuning/"> Instruction Fine-Tuning </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../generative_ai/rlhf/"> Reinforcement Learning From Human Feedback </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../generative_ai/peft/"> PEFT </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../generative_ai/lora/"> LoRa </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../generative_ai/probing/"> Probing </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../generative_ai/evaluation/"> Evaluation </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../generative_ai/deployment/"> Deployment </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../generative_ai/build_applications/"> Build applications </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_4_6" type="checkbox"/> <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0"> HuggingFace <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_4_6_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_4_6"> <span class="md-nav__icon md-icon"></span> HuggingFace </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../generative_ai/huggingface/"> Overview </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../generative_ai/tutorials/hugginface_intro/"> Hugginface Intro </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../generative_ai/tutorials/hugging-face-tokenizer/"> Using Hugging Face Tokenizers </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../generative_ai/tutorials/diffusers/"> Diffusion models and the library from ðŸ¤— </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_4_7" type="checkbox"/> <label class="md-nav__link" for="__nav_4_7" id="__nav_4_7_label" tabindex="0"> Embeddings <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_4_7_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_4_7"> <span class="md-nav__icon md-icon"></span> Embeddings </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../generative_ai/tutorials/lance_db/"> Vector Database Basics </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../generative_ai/tutorials/lance_db_multimodal/"> Multimodal Search </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_4_8" type="checkbox"/> <label class="md-nav__link" for="__nav_4_8" id="__nav_4_8_label" tabindex="0"> Tutorials <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_4_8_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_4_8"> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_4_8_1" type="checkbox"/> <label class="md-nav__link" for="__nav_4_8_1" id="__nav_4_8_1_label" tabindex="0"> Generative AI <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_4_8_1_label" class="md-nav" data-md-level="3"> <label class="md-nav__title" for="__nav_4_8_1"> <span class="md-nav__icon md-icon"></span> Generative AI </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../generative_ai/tutorials/pytorch_intro/"> Pytorch </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_4_8_1_2" type="checkbox"/> <div class="md-nav__link md-nav__link--index"> <a href="../../generative_ai/tutorials/try_promt_techniques/">Promting techninques review</a> <label for="__nav_4_8_1_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded="false" aria-labelledby="__nav_4_8_1_2_label" class="md-nav" data-md-level="4"> <label class="md-nav__title" for="__nav_4_8_1_2"> <span class="md-nav__icon md-icon"></span> Promting techninques review </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../generative_ai/nlp/intro/"> NLP: Natural Language Processing </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../generative_ai/tutorials/Building_QA_Datasets/"> Building Question Answering Datasets </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../generative_ai/tutorials/wikipedia_qa/"> Wikipedia QA Opean AI example </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../generative_ai/tutorials/example_ReAcT_prompt/"> React promt example </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../generative_ai/tutorials/openai_functions/"> Open AI call function </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../generative_ai/tutorials/langchain_examples/"> Langchain introduction </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_4_8_1_6" type="checkbox"/> <label class="md-nav__link" for="__nav_4_8_1_6" id="__nav_4_8_1_6_label" tabindex="0"> Transfer Learning <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_4_8_1_6_label" class="md-nav" data-md-level="4"> <label class="md-nav__title" for="__nav_4_8_1_6"> <span class="md-nav__icon md-icon"></span> Transfer Learning </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../generative_ai/tutorials/transfer-learning-mobilenet/"> Exercise: Transfer learning using MobileNetV3 </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../generative_ai/tutorials/train_gans/"> Generative Adversarial Network: training </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../generative_ai/tutorials/training_DDPM/"> Train a Denoising Diffusion Probabilistic Model from scratch </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/> <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0"> Mlops <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_5"> <span class="md-nav__icon md-icon"></span> Mlops </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../mlops/mlops_intro/"> Introduction </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../mlops/continous_delivery/"> Continous integration </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_5_3" type="checkbox"/> <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0"> Tools <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_5_3_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_5_3"> <span class="md-nav__icon md-icon"></span> Tools </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../mlops/tools/docker_file/"> Docker </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../mlops/tools/github_actions/"> Github actions </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../mlops/tools/makefile/"> Makefile </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked="" class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/> <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0"> Python <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="true" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_6"> <span class="md-nav__icon md-icon"></span> Python </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_6_1" type="checkbox"/> <label class="md-nav__link" for="__nav_6_1" id="__nav_6_1_label" tabindex="0"> API's <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_6_1_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_6_1"> <span class="md-nav__icon md-icon"></span> API's </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../apis/best_practices/"> Best practices </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../apis/fastapi/"> FastAPI </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../apis/flask/"> Flask </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_6_2" type="checkbox"/> <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0"> CLI's <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_6_2_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_6_2"> <span class="md-nav__icon md-icon"></span> CLI's </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../cli/argparse/"> Argparse </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../cli/click/"> Click </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_6_3" type="checkbox"/> <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0"> Environments <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_6_3_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_6_3"> <span class="md-nav__icon md-icon"></span> Environments </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../environments/"> Virtual environments </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_6_4" type="checkbox"/> <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0"> Packaging <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_6_4_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_6_4"> <span class="md-nav__icon md-icon"></span> Packaging </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../packaging/setuptools/"> Setuptools </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked="" class="md-nav__toggle md-toggle" id="__nav_6_5" type="checkbox"/> <label class="md-nav__link" for="__nav_6_5" id="__nav_6_5_label" tabindex="0"> Tests <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="true" aria-labelledby="__nav_6_5_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_6_5"> <span class="md-nav__icon md-icon"></span> Tests </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/> <label class="md-nav__link md-nav__link--active" for="__toc"> Pytests <span class="md-nav__icon md-icon"></span> </label> <a class="md-nav__link md-nav__link--active" href="./"> Pytests </a> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="#pytest"> Pytest </a> <nav aria-label="Pytest" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#test-layouts"> Test layouts </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#how-syntax-works"> How syntax works </a> <nav aria-label="How syntax works" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#functions"> Functions </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#classes"> Classes </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#run-tests"> Run tests </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#testing-failures"> Testing failures </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#another-commands-for-pytest"> Another commands for pytest </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#plugins"> Plugins </a> <nav aria-label="Plugins" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#pytest-xdist"> pytest-xdist </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#nbval"> nbval </a> <nav aria-label="nbval" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#installation"> Installation </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#usage"> Usage </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#other-functionalities"> Other functionalities </a> <nav aria-label="Other functionalities" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#parametrize-tests"> Parametrize tests </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#fixtures"> Fixtures </a> <nav aria-label="Fixtures" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#fixture-scopes"> fixture scopes </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#fixture-dependencies"> Fixture dependencies </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#temporal-directories"> temporal directories </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#monkeypatch"> Monkeypatch </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../about/"> About </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="#pytest"> Pytest </a> <nav aria-label="Pytest" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#test-layouts"> Test layouts </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#how-syntax-works"> How syntax works </a> <nav aria-label="How syntax works" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#functions"> Functions </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#classes"> Classes </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#run-tests"> Run tests </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#testing-failures"> Testing failures </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#another-commands-for-pytest"> Another commands for pytest </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#plugins"> Plugins </a> <nav aria-label="Plugins" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#pytest-xdist"> pytest-xdist </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#nbval"> nbval </a> <nav aria-label="nbval" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#installation"> Installation </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#usage"> Usage </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#other-functionalities"> Other functionalities </a> <nav aria-label="Other functionalities" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#parametrize-tests"> Parametrize tests </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#fixtures"> Fixtures </a> <nav aria-label="Fixtures" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#fixture-scopes"> fixture scopes </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#fixture-dependencies"> Fixture dependencies </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#temporal-directories"> temporal directories </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#monkeypatch"> Monkeypatch </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-content" data-md-component="content"> <article class="md-content__inner md-typeset"> <!-- Google AdSense Code --> <script async="" crossorigin="anonymous" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4806129530093947"></script> <!-- End Google AdSense Code --> <nav class="md-tags"> <span class="md-tag">Python</span> <span class="md-tag">Tests</span> <span class="md-tag">Development</span> </nav> <h1>Pytests</h1> <h2 id="pytest">Pytest<a class="headerlink" href="#pytest" title="Permanent link">âš‘</a></h2> <h3 id="test-layouts">Test layouts<a class="headerlink" href="#test-layouts" title="Permanent link">âš‘</a></h3> <ul> <li>Directory layout starts with <code>tests</code></li> <li>From <code>tests</code> you can add anything like <code>unit</code>, <code>functional</code> or other meaningful names like <code>database</code></li> <li>Files need to be pre-fixed with <code>test_</code></li> <li>Test functions need to be prefixed with <code>test_</code></li> <li>Test classes need to be prefixed with <code>Test</code></li> </ul> <h3 id="how-syntax-works">How syntax works<a class="headerlink" href="#how-syntax-works" title="Permanent link">âš‘</a></h3> <p>Tests can be functions or classes</p> <h4 id="functions">Functions<a class="headerlink" href="#functions" title="Permanent link">âš‘</a></h4> <div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="k">def</span> <span class="nf">test_my_function</span><span class="p">():</span>
</span><span id="__span-0-2"><a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a>  <span class="k">assert</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">1</span>
</span></code></pre></div> <h4 id="classes">Classes<a class="headerlink" href="#classes" title="Permanent link">âš‘</a></h4> <p>Classes do not need inheritance:</p> <p><a id="str_to_int-function"></a></p> <div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="c1"># This function is here for convenience only, in a real-world scenario this function</span>
</span><span id="__span-1-2"><a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="c1"># would be elsewhere in a package</span>
</span><span id="__span-1-3"><a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a>
</span><span id="__span-1-4"><a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="k">def</span> <span class="nf">str_to_int</span><span class="p">(</span><span class="n">string</span><span class="p">):</span>
</span><span id="__span-1-5"><a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="w">    </span><span class="sd">'''</span>
</span><span id="__span-1-6"><a href="#__codelineno-1-6" id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="sd">    Parses a string number into an integer, optionally converting to a float</span>
</span><span id="__span-1-7"><a href="#__codelineno-1-7" id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="sd">    and rounding down.</span>
</span><span id="__span-1-8"><a href="#__codelineno-1-8" id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="sd">    You can pass '1.1' which returns 1</span>
</span><span id="__span-1-9"><a href="#__codelineno-1-9" id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="sd">    ['1'] -&gt; raises RuntimeError</span>
</span><span id="__span-1-10"><a href="#__codelineno-1-10" id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="sd">    '''</span>
</span><span id="__span-1-11"><a href="#__codelineno-1-11" id="__codelineno-1-11" name="__codelineno-1-11"></a>    <span class="n">error_msg</span> <span class="o">=</span> <span class="s1">'Unable to convert to integer: '</span><span class="o">%</span><span class="n">s</span><span class="s1">''</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
</span><span id="__span-1-12"><a href="#__codelineno-1-12" id="__codelineno-1-12" name="__codelineno-1-12"></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-1-13"><a href="#__codelineno-1-13" id="__codelineno-1-13" name="__codelineno-1-13"></a>        <span class="n">integer</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">','</span><span class="p">,</span> <span class="s1">'.'</span><span class="p">))</span>
</span><span id="__span-1-14"><a href="#__codelineno-1-14" id="__codelineno-1-14" name="__codelineno-1-14"></a>    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
</span><span id="__span-1-15"><a href="#__codelineno-1-15" id="__codelineno-1-15" name="__codelineno-1-15"></a>        <span class="c1"># this might be a integer already, so try to use it, otherwise raise</span>
</span><span id="__span-1-16"><a href="#__codelineno-1-16" id="__codelineno-1-16" name="__codelineno-1-16"></a>        <span class="c1"># the original exception</span>
</span><span id="__span-1-17"><a href="#__codelineno-1-17" id="__codelineno-1-17" name="__codelineno-1-17"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">string</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="__span-1-18"><a href="#__codelineno-1-18" id="__codelineno-1-18" name="__codelineno-1-18"></a>            <span class="n">integer</span> <span class="o">=</span> <span class="n">string</span>
</span><span id="__span-1-19"><a href="#__codelineno-1-19" id="__codelineno-1-19" name="__codelineno-1-19"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-1-20"><a href="#__codelineno-1-20" id="__codelineno-1-20" name="__codelineno-1-20"></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
</span><span id="__span-1-21"><a href="#__codelineno-1-21" id="__codelineno-1-21" name="__codelineno-1-21"></a>    <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
</span><span id="__span-1-22"><a href="#__codelineno-1-22" id="__codelineno-1-22" name="__codelineno-1-22"></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
</span><span id="__span-1-23"><a href="#__codelineno-1-23" id="__codelineno-1-23" name="__codelineno-1-23"></a>
</span><span id="__span-1-24"><a href="#__codelineno-1-24" id="__codelineno-1-24" name="__codelineno-1-24"></a>    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">integer</span><span class="p">)</span>
</span><span id="__span-1-25"><a href="#__codelineno-1-25" id="__codelineno-1-25" name="__codelineno-1-25"></a>
</span><span id="__span-1-26"><a href="#__codelineno-1-26" id="__codelineno-1-26" name="__codelineno-1-26"></a><span class="c1"># When you create yout class test you have special methods</span>
</span><span id="__span-1-27"><a href="#__codelineno-1-27" id="__codelineno-1-27" name="__codelineno-1-27"></a><span class="k">class</span> <span class="nc">TestStrToInt</span><span class="p">:</span>
</span><span id="__span-1-28"><a href="#__codelineno-1-28" id="__codelineno-1-28" name="__codelineno-1-28"></a>
</span><span id="__span-1-29"><a href="#__codelineno-1-29" id="__codelineno-1-29" name="__codelineno-1-29"></a>    <span class="k">def</span> <span class="nf">setup_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-1-30"><a href="#__codelineno-1-30" id="__codelineno-1-30" name="__codelineno-1-30"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">'</span><span class="se">\n</span><span class="s1">this is setup'</span><span class="p">)</span>
</span><span id="__span-1-31"><a href="#__codelineno-1-31" id="__codelineno-1-31" name="__codelineno-1-31"></a>
</span><span id="__span-1-32"><a href="#__codelineno-1-32" id="__codelineno-1-32" name="__codelineno-1-32"></a>    <span class="k">def</span> <span class="nf">teardown_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-1-33"><a href="#__codelineno-1-33" id="__codelineno-1-33" name="__codelineno-1-33"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">'</span><span class="se">\n</span><span class="s1">this is teardown'</span><span class="p">)</span>
</span><span id="__span-1-34"><a href="#__codelineno-1-34" id="__codelineno-1-34" name="__codelineno-1-34"></a>
</span><span id="__span-1-35"><a href="#__codelineno-1-35" id="__codelineno-1-35" name="__codelineno-1-35"></a>    <span class="k">def</span> <span class="nf">setup_class</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
</span><span id="__span-1-36"><a href="#__codelineno-1-36" id="__codelineno-1-36" name="__codelineno-1-36"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">'</span><span class="se">\n</span><span class="s1">this is setup class'</span><span class="p">)</span>
</span><span id="__span-1-37"><a href="#__codelineno-1-37" id="__codelineno-1-37" name="__codelineno-1-37"></a>
</span><span id="__span-1-38"><a href="#__codelineno-1-38" id="__codelineno-1-38" name="__codelineno-1-38"></a>    <span class="k">def</span> <span class="nf">teardown_class</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
</span><span id="__span-1-39"><a href="#__codelineno-1-39" id="__codelineno-1-39" name="__codelineno-1-39"></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">'</span><span class="se">\n</span><span class="s1">this is teardown class'</span><span class="p">)</span>
</span><span id="__span-1-40"><a href="#__codelineno-1-40" id="__codelineno-1-40" name="__codelineno-1-40"></a>
</span><span id="__span-1-41"><a href="#__codelineno-1-41" id="__codelineno-1-41" name="__codelineno-1-41"></a>    <span class="k">def</span> <span class="nf">test_rounds_down</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-1-42"><a href="#__codelineno-1-42" id="__codelineno-1-42" name="__codelineno-1-42"></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">str_to_int</span><span class="p">(</span><span class="s1">'1.99'</span><span class="p">)</span>
</span><span id="__span-1-43"><a href="#__codelineno-1-43" id="__codelineno-1-43" name="__codelineno-1-43"></a>        <span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="mi">2</span>
</span><span id="__span-1-44"><a href="#__codelineno-1-44" id="__codelineno-1-44" name="__codelineno-1-44"></a>
</span><span id="__span-1-45"><a href="#__codelineno-1-45" id="__codelineno-1-45" name="__codelineno-1-45"></a>    <span class="k">def</span> <span class="nf">test_round_down_lesser_half</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-1-46"><a href="#__codelineno-1-46" id="__codelineno-1-46" name="__codelineno-1-46"></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">str_to_int</span><span class="p">(</span><span class="s1">'1.2'</span><span class="p">)</span>
</span><span id="__span-1-47"><a href="#__codelineno-1-47" id="__codelineno-1-47" name="__codelineno-1-47"></a>        <span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="mi">2</span>
</span></code></pre></div> <p>That setup_class is executed before a test in a class and happens just once, and setup_method is executed before every test in the class.</p> <p>You can use these special methods to run code before all tests in a class or before each one.</p> <p>You can see the ouput here:</p> <details> <summary>Ouptut example</summary> <div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="o">=======================================</span> <span class="n">test</span> <span class="n">session</span> <span class="n">starts</span> <span class="o">=======================================</span>
</span><span id="__span-2-2"><a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="n">platform</span> <span class="n">linux</span> <span class="o">--</span> <span class="n">Python</span> <span class="mf">3.8.10</span><span class="p">,</span> <span class="n">pytest</span><span class="o">-</span><span class="mf">7.2.0</span><span class="p">,</span> <span class="n">pluggy</span><span class="o">-</span><span class="mf">1.0.0</span>
</span><span id="__span-2-3"><a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="n">rootdir</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">coder</span><span class="o">/</span><span class="n">python</span><span class="o">-</span><span class="n">testing</span><span class="o">/</span><span class="n">notebooks</span><span class="o">/</span><span class="n">lesson2</span>
</span><span id="__span-2-4"><a href="#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="n">collected</span> <span class="mi">2</span> <span class="n">items</span>
</span><span id="__span-2-5"><a href="#__codelineno-2-5" id="__codelineno-2-5" name="__codelineno-2-5"></a>
</span><span id="__span-2-6"><a href="#__codelineno-2-6" id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="n">test</span><span class="o">-</span><span class="n">classes</span><span class="o">/</span><span class="n">test_classes</span><span class="o">.</span><span class="n">py</span> <span class="n">FF</span>                                                             <span class="p">[</span><span class="mi">100</span><span class="o">%</span><span class="p">]</span>
</span><span id="__span-2-7"><a href="#__codelineno-2-7" id="__codelineno-2-7" name="__codelineno-2-7"></a>
</span><span id="__span-2-8"><a href="#__codelineno-2-8" id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="o">============================================</span> <span class="n">FAILURES</span> <span class="o">=============================================</span>
</span><span id="__span-2-9"><a href="#__codelineno-2-9" id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="n">__________________________________</span> <span class="n">TestStrToInt</span><span class="o">.</span><span class="n">test_rounds_down</span> <span class="n">__________________________________</span>
</span><span id="__span-2-10"><a href="#__codelineno-2-10" id="__codelineno-2-10" name="__codelineno-2-10"></a>
</span><span id="__span-2-11"><a href="#__codelineno-2-11" id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="bp">self</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">test_classes</span><span class="o">.</span><span class="n">TestStrToInt</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x7f9e8a8c8220</span><span class="o">&gt;</span>
</span><span id="__span-2-12"><a href="#__codelineno-2-12" id="__codelineno-2-12" name="__codelineno-2-12"></a>
</span><span id="__span-2-13"><a href="#__codelineno-2-13" id="__codelineno-2-13" name="__codelineno-2-13"></a>    <span class="k">def</span> <span class="nf">test_rounds_down</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-2-14"><a href="#__codelineno-2-14" id="__codelineno-2-14" name="__codelineno-2-14"></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">str_to_int</span><span class="p">(</span><span class="s1">'1.99'</span><span class="p">)</span>
</span><span id="__span-2-15"><a href="#__codelineno-2-15" id="__codelineno-2-15" name="__codelineno-2-15"></a><span class="o">&gt;</span>       <span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="mi">2</span>
</span><span id="__span-2-16"><a href="#__codelineno-2-16" id="__codelineno-2-16" name="__codelineno-2-16"></a><span class="n">E</span>       <span class="k">assert</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">2</span>
</span><span id="__span-2-17"><a href="#__codelineno-2-17" id="__codelineno-2-17" name="__codelineno-2-17"></a>
</span><span id="__span-2-18"><a href="#__codelineno-2-18" id="__codelineno-2-18" name="__codelineno-2-18"></a><span class="n">test</span><span class="o">-</span><span class="n">classes</span><span class="o">/</span><span class="n">test_classes</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">44</span><span class="p">:</span> <span class="ne">AssertionError</span>
</span><span id="__span-2-19"><a href="#__codelineno-2-19" id="__codelineno-2-19" name="__codelineno-2-19"></a><span class="o">--------------------------------------</span> <span class="n">Captured</span> <span class="n">stdout</span> <span class="n">setup</span> <span class="o">--------------------------------------</span>
</span><span id="__span-2-20"><a href="#__codelineno-2-20" id="__codelineno-2-20" name="__codelineno-2-20"></a>
</span><span id="__span-2-21"><a href="#__codelineno-2-21" id="__codelineno-2-21" name="__codelineno-2-21"></a><span class="n">this</span> <span class="ow">is</span> <span class="n">setup</span> <span class="k">class</span>
</span><span id="__span-2-22"><a href="#__codelineno-2-22" id="__codelineno-2-22" name="__codelineno-2-22"></a>
</span><span id="__span-2-23"><a href="#__codelineno-2-23" id="__codelineno-2-23" name="__codelineno-2-23"></a><span class="nc">this</span> <span class="ow">is</span> <span class="n">setup</span>
</span><span id="__span-2-24"><a href="#__codelineno-2-24" id="__codelineno-2-24" name="__codelineno-2-24"></a><span class="o">------------------------------------</span> <span class="n">Captured</span> <span class="n">stdout</span> <span class="n">teardown</span> <span class="o">-------------------------------------</span>
</span><span id="__span-2-25"><a href="#__codelineno-2-25" id="__codelineno-2-25" name="__codelineno-2-25"></a>
</span><span id="__span-2-26"><a href="#__codelineno-2-26" id="__codelineno-2-26" name="__codelineno-2-26"></a><span class="n">this</span> <span class="ow">is</span> <span class="n">teardown</span>
</span><span id="__span-2-27"><a href="#__codelineno-2-27" id="__codelineno-2-27" name="__codelineno-2-27"></a><span class="n">____________________________</span> <span class="n">TestStrToInt</span><span class="o">.</span><span class="n">test_round_down_lesser_half</span> <span class="n">_____________________________</span>
</span><span id="__span-2-28"><a href="#__codelineno-2-28" id="__codelineno-2-28" name="__codelineno-2-28"></a>
</span><span id="__span-2-29"><a href="#__codelineno-2-29" id="__codelineno-2-29" name="__codelineno-2-29"></a><span class="bp">self</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">test_classes</span><span class="o">.</span><span class="n">TestStrToInt</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x7f9e8a8c8340</span><span class="o">&gt;</span>
</span><span id="__span-2-30"><a href="#__codelineno-2-30" id="__codelineno-2-30" name="__codelineno-2-30"></a>
</span><span id="__span-2-31"><a href="#__codelineno-2-31" id="__codelineno-2-31" name="__codelineno-2-31"></a>    <span class="k">def</span> <span class="nf">test_round_down_lesser_half</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-2-32"><a href="#__codelineno-2-32" id="__codelineno-2-32" name="__codelineno-2-32"></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">str_to_int</span><span class="p">(</span><span class="s1">'1.2'</span><span class="p">)</span>
</span><span id="__span-2-33"><a href="#__codelineno-2-33" id="__codelineno-2-33" name="__codelineno-2-33"></a><span class="o">&gt;</span>       <span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="mi">2</span>
</span><span id="__span-2-34"><a href="#__codelineno-2-34" id="__codelineno-2-34" name="__codelineno-2-34"></a><span class="n">E</span>       <span class="k">assert</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">2</span>
</span><span id="__span-2-35"><a href="#__codelineno-2-35" id="__codelineno-2-35" name="__codelineno-2-35"></a>
</span><span id="__span-2-36"><a href="#__codelineno-2-36" id="__codelineno-2-36" name="__codelineno-2-36"></a><span class="n">test</span><span class="o">-</span><span class="n">classes</span><span class="o">/</span><span class="n">test_classes</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span> <span class="ne">AssertionError</span>
</span><span id="__span-2-37"><a href="#__codelineno-2-37" id="__codelineno-2-37" name="__codelineno-2-37"></a><span class="o">--------------------------------------</span> <span class="n">Captured</span> <span class="n">stdout</span> <span class="n">setup</span> <span class="o">--------------------------------------</span>
</span><span id="__span-2-38"><a href="#__codelineno-2-38" id="__codelineno-2-38" name="__codelineno-2-38"></a>
</span><span id="__span-2-39"><a href="#__codelineno-2-39" id="__codelineno-2-39" name="__codelineno-2-39"></a><span class="n">this</span> <span class="ow">is</span> <span class="n">setup</span>
</span><span id="__span-2-40"><a href="#__codelineno-2-40" id="__codelineno-2-40" name="__codelineno-2-40"></a><span class="o">------------------------------------</span> <span class="n">Captured</span> <span class="n">stdout</span> <span class="n">teardown</span> <span class="o">-------------------------------------</span>
</span><span id="__span-2-41"><a href="#__codelineno-2-41" id="__codelineno-2-41" name="__codelineno-2-41"></a>
</span><span id="__span-2-42"><a href="#__codelineno-2-42" id="__codelineno-2-42" name="__codelineno-2-42"></a><span class="n">this</span> <span class="ow">is</span> <span class="n">teardown</span>
</span><span id="__span-2-43"><a href="#__codelineno-2-43" id="__codelineno-2-43" name="__codelineno-2-43"></a>
</span><span id="__span-2-44"><a href="#__codelineno-2-44" id="__codelineno-2-44" name="__codelineno-2-44"></a><span class="n">this</span> <span class="ow">is</span> <span class="n">teardown</span> <span class="k">class</span>
</span><span id="__span-2-45"><a href="#__codelineno-2-45" id="__codelineno-2-45" name="__codelineno-2-45"></a><span class="err">===================================== </span><span class="nc">short</span> <span class="n">test</span> <span class="n">summary</span> <span class="n">info</span> <span class="o">=====================================</span>
</span><span id="__span-2-46"><a href="#__codelineno-2-46" id="__codelineno-2-46" name="__codelineno-2-46"></a><span class="n">FAILED</span> <span class="n">test</span><span class="o">-</span><span class="n">classes</span><span class="o">/</span><span class="n">test_classes</span><span class="o">.</span><span class="n">py</span><span class="p">::</span><span class="n">TestStrToInt</span><span class="p">::</span><span class="n">test_rounds_down</span> <span class="o">-</span> <span class="k">assert</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">2</span>
</span><span id="__span-2-47"><a href="#__codelineno-2-47" id="__codelineno-2-47" name="__codelineno-2-47"></a><span class="n">FAILED</span> <span class="n">test</span><span class="o">-</span><span class="n">classes</span><span class="o">/</span><span class="n">test_classes</span><span class="o">.</span><span class="n">py</span><span class="p">::</span><span class="n">TestStrToInt</span><span class="p">::</span><span class="n">test_round_down_lesser_half</span> <span class="o">-</span> <span class="k">assert</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">2</span>
</span><span id="__span-2-48"><a href="#__codelineno-2-48" id="__codelineno-2-48" name="__codelineno-2-48"></a><span class="o">========================================</span> <span class="mi">2</span> <span class="n">failed</span> <span class="ow">in</span> <span class="mf">0.02</span><span class="n">s</span> <span class="o">========================================</span>
</span></code></pre></div> </details> <h3 id="run-tests">Run tests<a class="headerlink" href="#run-tests" title="Permanent link">âš‘</a></h3> <p>In the test directory</p> <div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a>pytest<span class="w"> </span>-vvvv<span class="w"> </span>tests/
</span></code></pre></div> <details> <summary>Ouptut example</summary> <div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="o">=============================</span> <span class="n">test</span> <span class="n">session</span> <span class="n">starts</span> <span class="o">==============================</span>
</span><span id="__span-4-2"><a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="n">platform</span> <span class="n">linux2</span> <span class="o">--</span> <span class="n">Python</span> <span class="mf">2.7.17</span><span class="p">,</span> <span class="n">pytest</span><span class="o">-</span><span class="mf">3.6.4</span><span class="p">,</span> <span class="n">py</span><span class="o">-</span><span class="mf">1.8.0</span><span class="p">,</span> <span class="n">pluggy</span><span class="o">-</span><span class="mf">0.7.1</span> <span class="o">--</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">python2</span>
</span><span id="__span-4-3"><a href="#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="n">cachedir</span><span class="p">:</span> <span class="o">.</span><span class="n">pytest_cache</span>
</span><span id="__span-4-4"><a href="#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="n">rootdir</span><span class="p">:</span> <span class="o">/</span><span class="n">content</span><span class="p">,</span> <span class="n">inifile</span><span class="p">:</span>
</span><span id="__span-4-5"><a href="#__codelineno-4-5" id="__codelineno-4-5" name="__codelineno-4-5"></a>
</span><span id="__span-4-6"><a href="#__codelineno-4-6" id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="n">collecting</span> <span class="mi">0</span> <span class="n">items</span>
</span><span id="__span-4-7"><a href="#__codelineno-4-7" id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="n">collecting</span> <span class="mi">2</span> <span class="n">items</span>
</span><span id="__span-4-8"><a href="#__codelineno-4-8" id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="n">collecting</span> <span class="mi">2</span> <span class="n">items</span>
</span><span id="__span-4-9"><a href="#__codelineno-4-9" id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="n">collecting</span> <span class="mi">2</span> <span class="n">items</span>
</span><span id="__span-4-10"><a href="#__codelineno-4-10" id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="n">collected</span> <span class="mi">2</span> <span class="n">items</span>
</span><span id="__span-4-11"><a href="#__codelineno-4-11" id="__codelineno-4-11" name="__codelineno-4-11"></a>
</span><span id="__span-4-12"><a href="#__codelineno-4-12" id="__codelineno-4-12" name="__codelineno-4-12"></a><span class="n">test_util</span><span class="o">.</span><span class="n">py</span><span class="p">::</span><span class="n">TestFloats</span><span class="p">::</span><span class="n">test_rounds_down</span> <span class="n">FAILED</span>                        <span class="p">[</span> <span class="mi">50</span><span class="o">%</span><span class="p">]</span>
</span><span id="__span-4-13"><a href="#__codelineno-4-13" id="__codelineno-4-13" name="__codelineno-4-13"></a><span class="n">test_util</span><span class="o">.</span><span class="n">py</span><span class="p">::</span><span class="n">TestFloats</span><span class="p">::</span><span class="n">test_round_down_lesser_half</span> <span class="n">FAILED</span>             <span class="p">[</span><span class="mi">100</span><span class="o">%</span><span class="p">]</span>
</span><span id="__span-4-14"><a href="#__codelineno-4-14" id="__codelineno-4-14" name="__codelineno-4-14"></a>
</span><span id="__span-4-15"><a href="#__codelineno-4-15" id="__codelineno-4-15" name="__codelineno-4-15"></a><span class="o">===================================</span> <span class="n">FAILURES</span> <span class="o">===================================</span>
</span><span id="__span-4-16"><a href="#__codelineno-4-16" id="__codelineno-4-16" name="__codelineno-4-16"></a><span class="n">_________________________</span> <span class="n">TestFloats</span><span class="o">.</span><span class="n">test_rounds_down</span> <span class="n">__________________________</span>
</span><span id="__span-4-17"><a href="#__codelineno-4-17" id="__codelineno-4-17" name="__codelineno-4-17"></a>
</span><span id="__span-4-18"><a href="#__codelineno-4-18" id="__codelineno-4-18" name="__codelineno-4-18"></a><span class="bp">self</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">test_util</span><span class="o">.</span><span class="n">TestFloats</span> <span class="n">instance</span> <span class="n">at</span> <span class="mh">0x7fbf26d90870</span><span class="o">&gt;</span>
</span><span id="__span-4-19"><a href="#__codelineno-4-19" id="__codelineno-4-19" name="__codelineno-4-19"></a>
</span><span id="__span-4-20"><a href="#__codelineno-4-20" id="__codelineno-4-20" name="__codelineno-4-20"></a>    <span class="k">def</span> <span class="nf">test_rounds_down</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-4-21"><a href="#__codelineno-4-21" id="__codelineno-4-21" name="__codelineno-4-21"></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">str_to_int</span><span class="p">(</span><span class="s1">'1.99'</span><span class="p">)</span>
</span><span id="__span-4-22"><a href="#__codelineno-4-22" id="__codelineno-4-22" name="__codelineno-4-22"></a><span class="o">&gt;</span>       <span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="mi">2</span>
</span><span id="__span-4-23"><a href="#__codelineno-4-23" id="__codelineno-4-23" name="__codelineno-4-23"></a><span class="n">E</span>       <span class="k">assert</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">2</span>
</span><span id="__span-4-24"><a href="#__codelineno-4-24" id="__codelineno-4-24" name="__codelineno-4-24"></a>
</span><span id="__span-4-25"><a href="#__codelineno-4-25" id="__codelineno-4-25" name="__codelineno-4-25"></a><span class="n">test_util</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span> <span class="ne">AssertionError</span>
</span><span id="__span-4-26"><a href="#__codelineno-4-26" id="__codelineno-4-26" name="__codelineno-4-26"></a><span class="n">show</span> <span class="n">more</span> <span class="p">(</span><span class="nb">open</span> <span class="n">the</span> <span class="n">raw</span> <span class="n">output</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">text</span> <span class="n">editor</span><span class="p">)</span> <span class="o">...</span>
</span><span id="__span-4-27"><a href="#__codelineno-4-27" id="__codelineno-4-27" name="__codelineno-4-27"></a>
</span><span id="__span-4-28"><a href="#__codelineno-4-28" id="__codelineno-4-28" name="__codelineno-4-28"></a>
</span><span id="__span-4-29"><a href="#__codelineno-4-29" id="__codelineno-4-29" name="__codelineno-4-29"></a><span class="n">this</span> <span class="ow">is</span> <span class="n">teardown</span>
</span><span id="__span-4-30"><a href="#__codelineno-4-30" id="__codelineno-4-30" name="__codelineno-4-30"></a>
</span><span id="__span-4-31"><a href="#__codelineno-4-31" id="__codelineno-4-31" name="__codelineno-4-31"></a><span class="n">this</span> <span class="ow">is</span> <span class="n">teardown</span> <span class="k">class</span>
</span><span id="__span-4-32"><a href="#__codelineno-4-32" id="__codelineno-4-32" name="__codelineno-4-32"></a><span class="err">=========================== 2 </span><span class="nc">failed</span> <span class="ow">in</span> <span class="mf">0.04</span> <span class="n">seconds</span> <span class="o">===========================</span>
</span></code></pre></div> </details> <h3 id="testing-failures">Testing failures<a class="headerlink" href="#testing-failures" title="Permanent link">âš‘</a></h3> <p>Enter to the python debugger where your code is failing:</p> <div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a>pytest<span class="w"> </span>--pdb<span class="w"> </span>test_failure_output.py
</span></code></pre></div> <p>Once entered in the debugger you can type <code>h</code> to see the commands that you can use.</p> <h3 id="another-commands-for-pytest">Another commands for pytest<a class="headerlink" href="#another-commands-for-pytest" title="Permanent link">âš‘</a></h3> <ul> <li><code>--collect-only</code> -&gt; Only collect tests, don't execute them</li> <li><code>-x</code> -&gt; Stop at the first failure</li> </ul> <p>To see all type:</p> <div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a>pytest<span class="w"> </span>--help
</span></code></pre></div> <h3 id="plugins">Plugins<a class="headerlink" href="#plugins" title="Permanent link">âš‘</a></h3> <h4 id="pytest-xdist">pytest-xdist<a class="headerlink" href="#pytest-xdist" title="Permanent link">âš‘</a></h4> <p>Gives you the ability to run instance for running your test using the <code>-n</code> cli parameter.</p> <div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a>pytest<span class="w"> </span>-n<span class="w"> </span><span class="m">4</span><span class="w"> </span>test/
</span></code></pre></div> <p>Going to set 4 differents runner instances and run them at the same time.</p> <h4 id="nbval">nbval<a class="headerlink" href="#nbval" title="Permanent link">âš‘</a></h4> <p>The plugin adds functionality to py.test to recognise and collect Jupyter notebooks. The intended purpose of the tests is to determine whether execution of the stored inputs match the stored outputs of the .ipynb file. Whilst also ensuring that the notebooks are running without errors.</p> <p>The tests were designed to ensure that Jupyter notebooks (especially those for reference and documentation), are executing consistently.</p> <p>Each cell is taken as a test, a cell that doesn't reproduce the expected output will fail.</p> <h5 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">âš‘</a></h5> <div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a>pip<span class="w"> </span>install<span class="w"> </span>nbval
</span></code></pre></div> <h5 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">âš‘</a></h5> <div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a>python<span class="w"> </span>-m<span class="w"> </span>pytest<span class="w"> </span>--nbval<span class="w"> </span>notebooks/
</span></code></pre></div> <h3 id="other-functionalities">Other functionalities<a class="headerlink" href="#other-functionalities" title="Permanent link">âš‘</a></h3> <h4 id="parametrize-tests">Parametrize tests<a class="headerlink" href="#parametrize-tests" title="Permanent link">âš‘</a></h4> <p>Parametrize tests it's like put a for loop over the tests that you want to expect the same result using the same function. The problem with plain for loops it's that the output it's a little bit confused. You don't know really where the error is located and if the rest of the loop it's going to be cover. So a good option it's parametrize tests.</p> <details> <summary>str_to_bool function:</summary> <div class="language-python highlight"><pre><span></span><code><span id="__span-10-1"><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a>  <span class="k">def</span> <span class="nf">str_to_bool</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
</span><span id="__span-10-2"><a href="#__codelineno-10-2" id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="w">    </span><span class="sd">'''</span>
</span><span id="__span-10-3"><a href="#__codelineno-10-3" id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="sd">    Convert a string representation of truth to True or False</span>
</span><span id="__span-10-4"><a href="#__codelineno-10-4" id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="sd">    True values are 'y', 'yes', or ''; case-insensitive</span>
</span><span id="__span-10-5"><a href="#__codelineno-10-5" id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="sd">    False values are 'n', or 'no'; case-insensitive</span>
</span><span id="__span-10-6"><a href="#__codelineno-10-6" id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="sd">    Raises ValueError if 'val' is anything else.</span>
</span><span id="__span-10-7"><a href="#__codelineno-10-7" id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="sd">    '''</span>
</span><span id="__span-10-8"><a href="#__codelineno-10-8" id="__codelineno-10-8" name="__codelineno-10-8"></a>    <span class="n">true_vals</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'yes'</span><span class="p">,</span> <span class="s1">'y'</span><span class="p">,</span> <span class="s1">''</span><span class="p">]</span>
</span><span id="__span-10-9"><a href="#__codelineno-10-9" id="__codelineno-10-9" name="__codelineno-10-9"></a>    <span class="n">false_vals</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'no'</span><span class="p">,</span> <span class="s1">'n'</span><span class="p">]</span>
</span><span id="__span-10-10"><a href="#__codelineno-10-10" id="__codelineno-10-10" name="__codelineno-10-10"></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-10-11"><a href="#__codelineno-10-11" id="__codelineno-10-11" name="__codelineno-10-11"></a>        <span class="n">val</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="__span-10-12"><a href="#__codelineno-10-12" id="__codelineno-10-12" name="__codelineno-10-12"></a>    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
</span><span id="__span-10-13"><a href="#__codelineno-10-13" id="__codelineno-10-13" name="__codelineno-10-13"></a>        <span class="n">val</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="__span-10-14"><a href="#__codelineno-10-14" id="__codelineno-10-14" name="__codelineno-10-14"></a>    <span class="k">if</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">true_vals</span><span class="p">:</span>
</span><span id="__span-10-15"><a href="#__codelineno-10-15" id="__codelineno-10-15" name="__codelineno-10-15"></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="__span-10-16"><a href="#__codelineno-10-16" id="__codelineno-10-16" name="__codelineno-10-16"></a>    <span class="k">elif</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">false_vals</span><span class="p">:</span>
</span><span id="__span-10-17"><a href="#__codelineno-10-17" id="__codelineno-10-17" name="__codelineno-10-17"></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="__span-10-18"><a href="#__codelineno-10-18" id="__codelineno-10-18" name="__codelineno-10-18"></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-10-19"><a href="#__codelineno-10-19" id="__codelineno-10-19" name="__codelineno-10-19"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'Invalid input value: </span><span class="si">%s</span><span class="s1">'</span> <span class="o">%</span> <span class="n">val</span><span class="p">)</span>
</span></code></pre></div> </details> <div class="language-python highlight"><pre><span></span><code><span id="__span-11-1"><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a> <span class="kn">import</span> <span class="nn">pytest</span>
</span><span id="__span-11-2"><a href="#__codelineno-11-2" id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="kn">from</span> <span class="nn">src</span> <span class="n">impport</span> <span class="n">str_to_bool</span> <span class="c1"># function to convert string to bool</span>
</span><span id="__span-11-3"><a href="#__codelineno-11-3" id="__codelineno-11-3" name="__codelineno-11-3"></a>
</span><span id="__span-11-4"><a href="#__codelineno-11-4" id="__codelineno-11-4" name="__codelineno-11-4"></a>
</span><span id="__span-11-5"><a href="#__codelineno-11-5" id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s1">'value'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'y'</span><span class="p">,</span> <span class="s1">'yes'</span><span class="p">,</span> <span class="s1">''</span><span class="p">])</span>
</span><span id="__span-11-6"><a href="#__codelineno-11-6" id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="k">def</span> <span class="nf">test_is_true</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
</span><span id="__span-11-7"><a href="#__codelineno-11-7" id="__codelineno-11-7" name="__codelineno-11-7"></a>    <span class="n">result</span> <span class="o">=</span> <span class="n">str_to_bool</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="__span-11-8"><a href="#__codelineno-11-8" id="__codelineno-11-8" name="__codelineno-11-8"></a>    <span class="k">assert</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">True</span>
</span></code></pre></div> <details> <summary>Example output:</summary> <div class="language-python highlight"><pre><span></span><code><span id="__span-12-1"><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="o">=======================================</span> <span class="n">test</span> <span class="n">session</span> <span class="n">starts</span> <span class="o">=======================================</span>
</span><span id="__span-12-2"><a href="#__codelineno-12-2" id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="n">platform</span> <span class="n">linux</span> <span class="o">--</span> <span class="n">Python</span> <span class="mf">3.8.10</span><span class="p">,</span> <span class="n">pytest</span><span class="o">-</span><span class="mf">7.2.0</span><span class="p">,</span> <span class="n">pluggy</span><span class="o">-</span><span class="mf">1.0.0</span>
</span><span id="__span-12-3"><a href="#__codelineno-12-3" id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="n">rootdir</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">coder</span><span class="o">/</span><span class="n">python</span><span class="o">-</span><span class="n">testing</span><span class="o">/</span><span class="n">notebooks</span><span class="o">/</span><span class="n">lesson2</span>
</span><span id="__span-12-4"><a href="#__codelineno-12-4" id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="n">collected</span> <span class="mi">3</span> <span class="n">items</span>
</span><span id="__span-12-5"><a href="#__codelineno-12-5" id="__codelineno-12-5" name="__codelineno-12-5"></a>
</span><span id="__span-12-6"><a href="#__codelineno-12-6" id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="n">parametrize</span><span class="o">/</span><span class="n">test_utils</span><span class="o">.</span><span class="n">py</span> <span class="o">...</span>                                                               <span class="p">[</span><span class="mi">100</span><span class="o">%</span><span class="p">]</span>
</span><span id="__span-12-7"><a href="#__codelineno-12-7" id="__codelineno-12-7" name="__codelineno-12-7"></a>
</span><span id="__span-12-8"><a href="#__codelineno-12-8" id="__codelineno-12-8" name="__codelineno-12-8"></a><span class="o">========================================</span> <span class="mi">3</span> <span class="n">passed</span> <span class="ow">in</span> <span class="mf">0.01</span><span class="n">s</span> <span class="o">========================================</span>
</span></code></pre></div> </details> <h4 id="fixtures">Fixtures<a class="headerlink" href="#fixtures" title="Permanent link">âš‘</a></h4> <p>In pytest, fixtures are a way to provide data or test-doubles (mocks, stubs, etc) to your tests. They are created using the <code>@pytest.fixture</code> decorator and then injected into your tests as arguments. Fixtures are meant to simplify test setup and teardown code, and they help to make your tests more modular and scalable.</p> <p>Here's a basic example of how to use a fixture in pytest:</p> <div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="kn">import</span> <span class="nn">pytest</span>
</span><span id="__span-13-2"><a href="#__codelineno-13-2" id="__codelineno-13-2" name="__codelineno-13-2"></a>
</span><span id="__span-13-3"><a href="#__codelineno-13-3" id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="c1"># Define a fixture</span>
</span><span id="__span-13-4"><a href="#__codelineno-13-4" id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
</span><span id="__span-13-5"><a href="#__codelineno-13-5" id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="k">def</span> <span class="nf">my_fixture</span><span class="p">():</span>
</span><span id="__span-13-6"><a href="#__codelineno-13-6" id="__codelineno-13-6" name="__codelineno-13-6"></a>    <span class="k">return</span> <span class="s1">'Hello, World!'</span>
</span><span id="__span-13-7"><a href="#__codelineno-13-7" id="__codelineno-13-7" name="__codelineno-13-7"></a>
</span><span id="__span-13-8"><a href="#__codelineno-13-8" id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="c1"># Use the fixture in a test</span>
</span><span id="__span-13-9"><a href="#__codelineno-13-9" id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="k">def</span> <span class="nf">test_hello</span><span class="p">(</span><span class="n">my_fixture</span><span class="p">):</span>
</span><span id="__span-13-10"><a href="#__codelineno-13-10" id="__codelineno-13-10" name="__codelineno-13-10"></a>    <span class="k">assert</span> <span class="n">my_fixture</span> <span class="o">==</span> <span class="s1">'Hello, World!'</span>
</span></code></pre></div> <p>In this example, the <code>my_fixture</code> fixture is defined to return the string <code>'Hello, World!'</code>. Then, in the <code>test_hello</code> test, <code>my_fixture</code> is injected as an argument. When pytest runs this test, it first calls the my_fixture fixture function and then passes its return value to <code>test_hello</code>.</p> <p>Here's a more complex example where a fixture is used for setup and teardown:</p> <div class="language-python highlight"><pre><span></span><code><span id="__span-14-1"><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="kn">import</span> <span class="nn">pytest</span>
</span><span id="__span-14-2"><a href="#__codelineno-14-2" id="__codelineno-14-2" name="__codelineno-14-2"></a>
</span><span id="__span-14-3"><a href="#__codelineno-14-3" id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="c1"># Define a fixture</span>
</span><span id="__span-14-4"><a href="#__codelineno-14-4" id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
</span><span id="__span-14-5"><a href="#__codelineno-14-5" id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="k">def</span> <span class="nf">database</span><span class="p">():</span>
</span><span id="__span-14-6"><a href="#__codelineno-14-6" id="__codelineno-14-6" name="__codelineno-14-6"></a>    <span class="n">db</span> <span class="o">=</span> <span class="n">setup_database</span><span class="p">()</span>  <span class="c1"># Setup code</span>
</span><span id="__span-14-7"><a href="#__codelineno-14-7" id="__codelineno-14-7" name="__codelineno-14-7"></a>    <span class="k">yield</span> <span class="n">db</span>  <span class="c1"># This is what will be injected into your tests</span>
</span><span id="__span-14-8"><a href="#__codelineno-14-8" id="__codelineno-14-8" name="__codelineno-14-8"></a>    <span class="n">teardown_database</span><span class="p">(</span><span class="n">db</span><span class="p">)</span>  <span class="c1"># Teardown code</span>
</span><span id="__span-14-9"><a href="#__codelineno-14-9" id="__codelineno-14-9" name="__codelineno-14-9"></a>
</span><span id="__span-14-10"><a href="#__codelineno-14-10" id="__codelineno-14-10" name="__codelineno-14-10"></a><span class="c1"># Use the fixture in a test</span>
</span><span id="__span-14-11"><a href="#__codelineno-14-11" id="__codelineno-14-11" name="__codelineno-14-11"></a><span class="k">def</span> <span class="nf">test_db</span><span class="p">(</span><span class="n">database</span><span class="p">):</span>
</span><span id="__span-14-12"><a href="#__codelineno-14-12" id="__codelineno-14-12" name="__codelineno-14-12"></a>    <span class="k">assert</span> <span class="n">database</span><span class="o">.</span><span class="n">is_connected</span><span class="p">()</span>
</span></code></pre></div> <p>In this example, the <code>database</code> fixture is used to manage a database connection. The setup_database function is called to establish the connection, and then the connection object is yielded to the test. After the test runs, the <code>teardown_database</code> function is called to clean up the connection.</p> <h5 id="fixture-scopes">fixture scopes<a class="headerlink" href="#fixture-scopes" title="Permanent link">âš‘</a></h5> <p>Fixture scope determines when a fixture is set up and torn down. The possible scopes are function, class, module, package or session:</p> <ul> <li><code>function</code>: The default scope, the fixture is set up and torn down for each test function.</li> <li><code>class</code>: The fixture is set up and torn down for each test class.</li> <li><code>module</code>: The fixture is set up and torn down once per test module.</li> <li><code>package</code>: The fixture is set up and torn down once per test package.</li> <li><code>session</code>: The fixture is set up once when the test session starts, and is torn down once at the end of the test session.</li> </ul> <div class="language-python highlight"><pre><span></span><code><span id="__span-15-1"><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="kn">import</span> <span class="nn">pytest</span>
</span><span id="__span-15-2"><a href="#__codelineno-15-2" id="__codelineno-15-2" name="__codelineno-15-2"></a>
</span><span id="__span-15-3"><a href="#__codelineno-15-3" id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s1">'module'</span><span class="p">)</span>
</span><span id="__span-15-4"><a href="#__codelineno-15-4" id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="k">def</span> <span class="nf">module_fixture</span><span class="p">():</span>
</span><span id="__span-15-5"><a href="#__codelineno-15-5" id="__codelineno-15-5" name="__codelineno-15-5"></a>    <span class="c1"># Setup code here</span>
</span><span id="__span-15-6"><a href="#__codelineno-15-6" id="__codelineno-15-6" name="__codelineno-15-6"></a>    <span class="k">yield</span> <span class="s1">'Hello, Module!'</span>
</span><span id="__span-15-7"><a href="#__codelineno-15-7" id="__codelineno-15-7" name="__codelineno-15-7"></a>    <span class="c1"># Teardown code here</span>
</span></code></pre></div> <h5 id="fixture-dependencies">Fixture dependencies<a class="headerlink" href="#fixture-dependencies" title="Permanent link">âš‘</a></h5> <p>Fixtures can use other fixtures. This is often useful when you want to modularize your fixtures for reuse and better organization.</p> <div class="language-python highlight"><pre><span></span><code><span id="__span-16-1"><a href="#__codelineno-16-1" id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="kn">import</span> <span class="nn">pytest</span>
</span><span id="__span-16-2"><a href="#__codelineno-16-2" id="__codelineno-16-2" name="__codelineno-16-2"></a>
</span><span id="__span-16-3"><a href="#__codelineno-16-3" id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
</span><span id="__span-16-4"><a href="#__codelineno-16-4" id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="k">def</span> <span class="nf">order</span><span class="p">():</span>
</span><span id="__span-16-5"><a href="#__codelineno-16-5" id="__codelineno-16-5" name="__codelineno-16-5"></a>    <span class="k">return</span> <span class="p">{</span><span class="s1">'name'</span><span class="p">:</span> <span class="s1">'Burger'</span><span class="p">,</span> <span class="s1">'price'</span><span class="p">:</span> <span class="mf">7.99</span><span class="p">}</span>
</span><span id="__span-16-6"><a href="#__codelineno-16-6" id="__codelineno-16-6" name="__codelineno-16-6"></a>
</span><span id="__span-16-7"><a href="#__codelineno-16-7" id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
</span><span id="__span-16-8"><a href="#__codelineno-16-8" id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="k">def</span> <span class="nf">cart</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
</span><span id="__span-16-9"><a href="#__codelineno-16-9" id="__codelineno-16-9" name="__codelineno-16-9"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">order</span><span class="p">]</span>
</span><span id="__span-16-10"><a href="#__codelineno-16-10" id="__codelineno-16-10" name="__codelineno-16-10"></a>
</span><span id="__span-16-11"><a href="#__codelineno-16-11" id="__codelineno-16-11" name="__codelineno-16-11"></a><span class="k">def</span> <span class="nf">test_cart</span><span class="p">(</span><span class="n">cart</span><span class="p">):</span>
</span><span id="__span-16-12"><a href="#__codelineno-16-12" id="__codelineno-16-12" name="__codelineno-16-12"></a>    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">cart</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
</span><span id="__span-16-13"><a href="#__codelineno-16-13" id="__codelineno-16-13" name="__codelineno-16-13"></a><span class="err">````</span>
</span><span id="__span-16-14"><a href="#__codelineno-16-14" id="__codelineno-16-14" name="__codelineno-16-14"></a>
</span><span id="__span-16-15"><a href="#__codelineno-16-15" id="__codelineno-16-15" name="__codelineno-16-15"></a><span class="c1">#### conftest</span>
</span><span id="__span-16-16"><a href="#__codelineno-16-16" id="__codelineno-16-16" name="__codelineno-16-16"></a>
</span><span id="__span-16-17"><a href="#__codelineno-16-17" id="__codelineno-16-17" name="__codelineno-16-17"></a><span class="n">The</span> <span class="n">conftest</span><span class="o">.</span><span class="n">py</span> <span class="n">file</span> <span class="n">serves</span> <span class="k">as</span> <span class="n">a</span> <span class="n">means</span> <span class="n">of</span> <span class="n">providing</span> <span class="n">fixtures</span> <span class="k">for</span> <span class="n">an</span> <span class="n">entire</span> <span class="n">directory</span>
</span><span id="__span-16-18"><a href="#__codelineno-16-18" id="__codelineno-16-18" name="__codelineno-16-18"></a><span class="n">of</span> <span class="n">tests</span><span class="o">.</span> <span class="n">Any</span> <span class="n">fixture</span> <span class="n">defined</span> <span class="ow">in</span> <span class="n">conftest</span><span class="o">.</span><span class="n">py</span> <span class="n">will</span> <span class="n">be</span> <span class="n">automatically</span> <span class="n">available</span> <span class="n">to</span> <span class="nb">all</span>
</span><span id="__span-16-19"><a href="#__codelineno-16-19" id="__codelineno-16-19" name="__codelineno-16-19"></a><span class="n">test</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">same</span> <span class="n">directory</span> <span class="ow">and</span> <span class="n">subdirectories</span><span class="o">.</span>
</span><span id="__span-16-20"><a href="#__codelineno-16-20" id="__codelineno-16-20" name="__codelineno-16-20"></a>
</span><span id="__span-16-21"><a href="#__codelineno-16-21" id="__codelineno-16-21" name="__codelineno-16-21"></a><span class="err">```</span><span class="n">python</span>
</span><span id="__span-16-22"><a href="#__codelineno-16-22" id="__codelineno-16-22" name="__codelineno-16-22"></a><span class="c1"># conftest.py</span>
</span><span id="__span-16-23"><a href="#__codelineno-16-23" id="__codelineno-16-23" name="__codelineno-16-23"></a><span class="kn">import</span> <span class="nn">pytest</span>
</span><span id="__span-16-24"><a href="#__codelineno-16-24" id="__codelineno-16-24" name="__codelineno-16-24"></a>
</span><span id="__span-16-25"><a href="#__codelineno-16-25" id="__codelineno-16-25" name="__codelineno-16-25"></a><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
</span><span id="__span-16-26"><a href="#__codelineno-16-26" id="__codelineno-16-26" name="__codelineno-16-26"></a><span class="k">def</span> <span class="nf">my_fixture</span><span class="p">():</span>
</span><span id="__span-16-27"><a href="#__codelineno-16-27" id="__codelineno-16-27" name="__codelineno-16-27"></a>    <span class="k">return</span> <span class="s1">'Available Everywhere'</span>
</span></code></pre></div> <h4 id="temporal-directories">temporal directories<a class="headerlink" href="#temporal-directories" title="Permanent link">âš‘</a></h4> <p>The tmpdir fixture is a built-in pytest fixture that creates a temporary directory unique to the test invocation, which is automatically cleaned up after the test.</p> <div class="language-python highlight"><pre><span></span><code><span id="__span-17-1"><a href="#__codelineno-17-1" id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="k">class</span> <span class="nc">TestMyClass</span><span class="p">:</span>
</span><span id="__span-17-2"><a href="#__codelineno-17-2" id="__codelineno-17-2" name="__codelineno-17-2"></a>
</span><span id="__span-17-3"><a href="#__codelineno-17-3" id="__codelineno-17-3" name="__codelineno-17-3"></a>    <span class="k">def</span> <span class="nf">test_write_Yes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tmpdir</span><span class="p">):</span>
</span><span id="__span-17-4"><a href="#__codelineno-17-4" id="__codelineno-17-4" name="__codelineno-17-4"></a>        <span class="n">path</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tmpdir</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">'test_value'</span><span class="p">))</span>
</span><span id="__span-17-5"><a href="#__codelineno-17-5" id="__codelineno-17-5" name="__codelineno-17-5"></a>        <span class="n">write_integer</span><span class="p">(</span><span class="s1">'Yes'</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
</span><span id="__span-17-6"><a href="#__codelineno-17-6" id="__codelineno-17-6" name="__codelineno-17-6"></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">)</span> <span class="k">as</span> <span class="n">_f</span><span class="p">:</span>
</span><span id="__span-17-7"><a href="#__codelineno-17-7" id="__codelineno-17-7" name="__codelineno-17-7"></a>            <span class="n">value</span> <span class="o">=</span> <span class="n">_f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span id="__span-17-8"><a href="#__codelineno-17-8" id="__codelineno-17-8" name="__codelineno-17-8"></a>
</span><span id="__span-17-9"><a href="#__codelineno-17-9" id="__codelineno-17-9" name="__codelineno-17-9"></a>        <span class="k">assert</span> <span class="n">value</span> <span class="o">==</span> <span class="s1">'True'</span>
</span></code></pre></div> <h4 id="monkeypatch">Monkeypatch<a class="headerlink" href="#monkeypatch" title="Permanent link">âš‘</a></h4> <p>The monkeypatch fixture helps to safely set/delete an attribute, dictionary item or environment variable or to modify sys.path for importing.</p> <div class="language-python highlight"><pre><span></span><code><span id="__span-18-1"><a href="#__codelineno-18-1" id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="k">def</span> <span class="nf">test_monkeypatch</span><span class="p">(</span><span class="n">monkeypatch</span><span class="p">):</span>
</span><span id="__span-18-2"><a href="#__codelineno-18-2" id="__codelineno-18-2" name="__codelineno-18-2"></a>    <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'HELLO'</span><span class="p">:</span> <span class="s1">'world'</span><span class="p">}</span>
</span><span id="__span-18-3"><a href="#__codelineno-18-3" id="__codelineno-18-3" name="__codelineno-18-3"></a>    <span class="n">monkeypatch</span><span class="o">.</span><span class="n">setenv</span><span class="p">(</span><span class="s1">'HELLO'</span><span class="p">,</span> <span class="s1">'monkeypatched'</span><span class="p">)</span>
</span><span id="__span-18-4"><a href="#__codelineno-18-4" id="__codelineno-18-4" name="__codelineno-18-4"></a>    <span class="k">assert</span> <span class="n">result</span><span class="p">[</span><span class="s1">'HELLO'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'monkeypatched'</span>
</span></code></pre></div> <hr/> <div class="md-source-file"> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2024-10-20T09:13:50+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-10-20</span> <br/> Created: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2024-10-20T09:13:50+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-10-20</span> </small> </div> <form class="md-feedback" hidden="" name="feedback"> <fieldset> <legend class="md-feedback__title"> Was this page helpful? </legend> <div class="md-feedback__inner"> <div class="md-feedback__list"> <button class="md-feedback__icon md-icon" data-md-value="1" title="This page was helpful" type="submit"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M5 9v12H1V9h4m4 12a2 2 0 0 1-2-2V9c0-.55.22-1.05.59-1.41L14.17 1l1.06 1.06c.27.27.44.64.44 1.05l-.03.32L14.69 8H21a2 2 0 0 1 2 2v2c0 .26-.05.5-.14.73l-3.02 7.05C19.54 20.5 18.83 21 18 21H9m0-2h9.03L21 12v-2h-8.79l1.13-5.32L9 9.03V19Z"></path></svg> </button> <button class="md-feedback__icon md-icon" data-md-value="0" title="This page could be improved" type="submit"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 15V3h4v12h-4M15 3a2 2 0 0 1 2 2v10c0 .55-.22 1.05-.59 1.41L9.83 23l-1.06-1.06c-.27-.27-.44-.64-.44-1.06l.03-.31.95-4.57H3a2 2 0 0 1-2-2v-2c0-.26.05-.5.14-.73l3.02-7.05C4.46 3.5 5.17 3 6 3h9m0 2H5.97L3 12v2h8.78l-1.13 5.32L15 14.97V5Z"></path></svg> </button> </div> <div class="md-feedback__note"> <div data-md-value="1" hidden=""> Thanks for your feedback! </div> <div data-md-value="0" hidden=""> Thanks for your feedback! Help us improve this page by using our <a href="..." rel="noopener" target="_blank">feedback form</a>. </div> </div> </div> </fieldset> </form> </article> </div> </div> <button class="md-top md-icon" data-md-component="top" hidden="" type="button"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg> Back to top </button> </main> <footer class="md-footer"> <nav aria-label="Footer" class="md-footer__inner md-grid"> <a aria-label="Previous: Setuptools" class="md-footer__link md-footer__link--prev" href="../packaging/setuptools/" rel="prev"> <div class="md-footer__button md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </div> <div class="md-footer__title"> <span class="md-footer__direction"> Previous </span> <div class="md-ellipsis"> Setuptools </div> </div> </a> <a aria-label="Next: About" class="md-footer__link md-footer__link--next" href="../../about/" rel="next"> <div class="md-footer__title"> <span class="md-footer__direction"> Next </span> <div class="md-ellipsis"> About </div> </div> <div class="md-footer__button md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="md-copyright"> Made with <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank"> Material for MkDocs </a> </div> <div class="md-social"> <a class="md-social__link" href="https://github.com/diefergil" rel="noopener" target="_blank" title="github.com"> <svg viewbox="0 0 480 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path></svg> </a> <a class="md-social__link" href="https://diefergil.github.io/personal-notes/newsletter/0_newsletter_index" rel="noopener" target="_blank" title="diefergil.github.io"> <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M0 64c0-17.7 14.3-32 32-32 229.8 0 416 186.2 416 416 0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96 14.3 96 0 81.7 0 64zm0 352a64 64 0 1 1 128 0 64 64 0 1 1-128 0zm32-256c159.1 0 288 128.9 288 288 0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224-17.7 0-32-14.3-32-32s14.3-32 32-32z"></path></svg> </a> </div> </div> </div> </footer> </div> <div class="md-dialog" data-md-component="dialog"> <div class="md-dialog__inner md-typeset"></div> </div> <div class="md-consent" data-md-component="consent" hidden="" id="__consent"> <div class="md-consent__overlay"></div> <aside class="md-consent__inner"> <form class="md-consent__form md-grid md-typeset" name="consent"> <h4>Cookie consent</h4> <p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p> <input class="md-toggle" id="__settings" type="checkbox"/> <div class="md-consent__settings"> <ul class="task-list"> <li class="task-list-item"> <label class="task-list-control"> <input checked="" name="analytics" type="checkbox"/> <span class="task-list-indicator"></span> Google Analytics </label> </li> <li class="task-list-item"> <label class="task-list-control"> <input checked="" name="github" type="checkbox"/> <span class="task-list-indicator"></span> GitHub </label> </li> </ul> </div> <div class="md-consent__controls"> <button class="md-button md-button--primary">Accept</button> <label class="md-button" for="__settings">Manage settings</label> </div> </form> </aside> </div> <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script> <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.footer", "navigation.instant", "navigation.top", "content.code.annotate", "search.suggest", "search.highlight", "content.code.copy", "content.code.select"], "search": "../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src="../../assets/javascripts/bundle.220ee61c.min.js"></script> <script src="../../js/timeago.min.js"></script> <script src="../../js/timeago_mkdocs_material.js"></script> <script src="../../optionalConfig.js"></script> <script src="https://unpkg.com/mermaid@9.4.0/dist/mermaid.min.js"></script> <script src="../../extra-loader.js"></script> <script src="../../javascripts/mathjax.js"></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script> </body> </html>